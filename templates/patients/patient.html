{% extends "base.html" %}

{% block title %}Patients{% endblock %}

{% block heading %}Patients{% endblock %}

{% block content %}
<ul>
    <li>
        <strong>Name:</strong> {{ patient.name }} <br>
        <strong>ID:</strong> {{ patient.id }} <br>
        <strong>Address:</strong> {{ patient.address }} <br>
        <!-- Add additional fields as needed -->
        <!-- Example: <strong>Gender:</strong> {{ patient.gender }} <br> -->
        <!-- Example: <strong>Birth Date:</strong> {{ patient.birth_date }} <br> -->
        <!-- Example: <strong>Phone Number:</strong> {{ patient.phone_number }} <br> -->
        <a href="/vitals/{{ patient.id }}">Add Vitals</a>
    </li>
    <h1>Vital Signs</h1>
</ul>
<div id="dayChart"></div>
<div id="dropdownOverall">
    <select id="chartType" onchange="updateCharts()">
        <option value="o2">Oxygen Levels</option>
        <option value="hr">Heart Rate</option>
    </select>
</div>
<div id="overallChart"></div>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
// Access the data passed from the backend
const overallLabels = JSON.parse('{{ timestamps | tojson }}');
const overallO2Levels = JSON.parse('{{ o2_levels | tojson }}');
const overallHeartRates = JSON.parse('{{ heart_rates | tojson }}');
const O2Levelstoday  = JSON.parse('{{ O2_levels_today | tojson }}');
const Heartratetoday  = JSON.parse('{{ heart_rates_today | tojson }}');
const timelabel = JSON.parse('{{ time_today | tojson }}');

// Rest of your JavaScript code
// ...

// Update both the day chart and the overall chart
function updateCharts() {
    currentChartType = chartTypeSelect.value;
    updateDayChart();
    updateOverallChart();
}

// Rest of your JavaScript code
// ...
</script>

<!-- <script src="{{ url_for('static', path='/script.js') }}"></script> -->
{% endblock %}
